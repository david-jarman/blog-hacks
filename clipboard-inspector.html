<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clipboard Contents Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    h1 { font-size: 2em; }
    button { padding: 0.5em 1em; font-size: 1em; }
    .section { margin-bottom: 2em; }

    /* ✅ Make long content wrap nicely on screen */
    #clipboardData {
      overflow-wrap: anywhere;   /* allow breaking very long "words" */
      word-break: break-word;    /* older fallback */
    }
    pre {
      background: #f4f4f4;
      padding: 1em;
      border-radius: 8px;
      margin: 0.5em 0;
      white-space: pre-wrap;     /* preserve newlines, but allow wrapping */
      overflow-wrap: anywhere;   /* break very long tokens (URLs, base64, etc.) */
      word-break: break-word;    /* fallback */
      max-width: 100%;           /* don’t overflow container */
    }

    /* Make images and textarea responsive */
    img { max-width: 100%; height: auto; }
    textarea { width: 100%; box-sizing: border-box; }
  </style>
</head>
<body>
  <h1>Clipboard Contents Viewer</h1>
  <p>This page will show you the full contents of your clipboard. Paste into the box below or click the button to read from the clipboard.</p>

  <div class="section">
    <button id="readClipboard">Read Clipboard</button>
  </div>

  <div class="section">
    <label for="clipboardPaste">Or paste here:</label><br>
    <textarea id="clipboardPaste" rows="8" cols="80" placeholder="Paste here to see raw contents..." wrap="soft"></textarea>
  </div>

  <div class="section">
    <h2>Clipboard Data</h2>
    <div id="clipboardData"></div>
  </div>

  <script>
    async function showClipboard() {
      const output = document.getElementById('clipboardData');
      output.innerHTML = '';

      if (!navigator.clipboard) {
        output.innerHTML = '<b>Your browser does not support the Clipboard API.</b>';
        return;
      }

      let items;
      try {
        items = await navigator.clipboard.read();
      } catch (e) {
        output.innerHTML = '<b>Unable to read clipboard (permission denied?).</b>';
        return;
      }

      for (const item of items) {
        for (const type of item.types) {
          const blob = await item.getType(type);
          if (type.startsWith('text/')) {
            const value = await blob.text();
            output.innerHTML += `
              <b>Type:</b> ${type}<br>
              <pre>${value.replace(/&/g,'&amp;').replace(/</g,'&lt;')}</pre>`;
          } else if (type.startsWith('image/')) {
            const url = URL.createObjectURL(blob);
            output.innerHTML += `<b>Type:</b> ${type}<br><img src="${url}" alt="Clipboard Image"><br>`;
          } else {
            output.innerHTML += `<b>Type:</b> ${type}<br><i>Binary data (${blob.size} bytes)</i><br>`;
          }
        }
      }
    }

    document.getElementById('readClipboard').addEventListener('click', showClipboard);

    document.getElementById('clipboardPaste').addEventListener('paste', e => {
      const output = document.getElementById('clipboardData');
      let out = '';
      for (const item of e.clipboardData.items) {
        out += `<b>Type:</b> ${item.type || 'unknown'}<br>`;
        if (item.type && item.type.startsWith('text/')) {
          item.getAsString(val => {
            output.innerHTML += out +
              `<pre>${val.replace(/&/g,'&amp;').replace(/</g,'&lt;')}</pre>`;
          });
        } else {
          output.innerHTML += out + `<i>Non-text data</i><br>`;
        }
      }
    });
  </script>
</body>
</html>
